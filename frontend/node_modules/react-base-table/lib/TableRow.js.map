{"version":3,"sources":["../src/TableRow.js"],"names":["TableRow","props","state","measured","_setRef","bind","_handleExpand","estimatedRowHeight","rowIndex","_measureHeight","prevProps","prevState","getIsResetting","setState","isScrolling","className","style","columns","rowData","expandColumnKey","depth","rowEventHandlers","rowRenderer","cellRenderer","expandIconRenderer","Tag","tagName","rowKey","onRowHover","onRowExpand","onRowHeightChange","rest","expandIcon","onExpand","cells","map","column","columnIndex","key","eventHandlers","_getEventHandlers","height","otherStyles","ref","expanded","initialMeasure","getBoundingClientRect","__placeholder__","frozen","handlers","Object","keys","forEach","eventKey","callback","event","mouseEnterHandler","hovered","mouseLeaveHandler","React","PureComponent","defaultProps","propTypes","PropTypes","bool","string","object","arrayOf","isRequired","number","oneOfType","func","element","elementType"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { renderElement } from './utils';\n\n/**\n * Row component for BaseTable\n */\nclass TableRow extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      measured: false,\n    };\n\n    this._setRef = this._setRef.bind(this);\n    this._handleExpand = this._handleExpand.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.estimatedRowHeight && this.props.rowIndex >= 0 && this._measureHeight(true);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      this.props.estimatedRowHeight &&\n      this.props.rowIndex >= 0 &&\n      // should not re-measure if it's updated after measured and reset\n      !this.props.getIsResetting() &&\n      this.state.measured &&\n      prevState.measured\n    ) {\n      this.setState({ measured: false }, () => this._measureHeight());\n    }\n  }\n\n  render() {\n    /* eslint-disable no-unused-vars */\n    const {\n      isScrolling,\n      className,\n      style,\n      columns,\n      rowIndex,\n      rowData,\n      expandColumnKey,\n      depth,\n      rowEventHandlers,\n      estimatedRowHeight,\n      rowRenderer,\n      cellRenderer,\n      expandIconRenderer,\n      tagName: Tag,\n      // omit the following from rest\n      rowKey,\n      getIsResetting,\n      onRowHover,\n      onRowExpand,\n      onRowHeightChange,\n      ...rest\n    } = this.props;\n    /* eslint-enable no-unused-vars */\n\n    const expandIcon = expandIconRenderer({ rowData, rowIndex, depth, onExpand: this._handleExpand });\n    let cells = columns.map((column, columnIndex) =>\n      cellRenderer({\n        isScrolling,\n        columns,\n        column,\n        columnIndex,\n        rowData,\n        rowIndex,\n        expandIcon: column.key === expandColumnKey && expandIcon,\n      })\n    );\n\n    if (rowRenderer) {\n      cells = renderElement(rowRenderer, { isScrolling, cells, columns, rowData, rowIndex, depth });\n    }\n\n    const eventHandlers = this._getEventHandlers(rowEventHandlers);\n\n    if (estimatedRowHeight && rowIndex >= 0) {\n      const { height, ...otherStyles } = style;\n      return (\n        <Tag\n          {...rest}\n          ref={this._setRef}\n          className={className}\n          style={this.state.measured ? style : otherStyles}\n          {...(this.state.measured && eventHandlers)}\n        >\n          {cells}\n        </Tag>\n      );\n    }\n\n    return (\n      <Tag {...rest} className={className} style={style} {...eventHandlers}>\n        {cells}\n      </Tag>\n    );\n  }\n\n  _setRef(ref) {\n    this.ref = ref;\n  }\n\n  _handleExpand(expanded) {\n    const { onRowExpand, rowData, rowIndex, rowKey } = this.props;\n    onRowExpand && onRowExpand({ expanded, rowData, rowIndex, rowKey });\n  }\n\n  _measureHeight(initialMeasure) {\n    if (!this.ref) return;\n\n    const { style, rowKey, onRowHeightChange, rowIndex, columns } = this.props;\n    const height = this.ref.getBoundingClientRect().height;\n    this.setState({ measured: true }, () => {\n      if (initialMeasure || height !== style.height)\n        onRowHeightChange(rowKey, height, rowIndex, columns[0] && !columns[0].__placeholder__ && columns[0].frozen);\n    });\n  }\n\n  _getEventHandlers(handlers = {}) {\n    const { rowData, rowIndex, rowKey, onRowHover } = this.props;\n    const eventHandlers = {};\n    Object.keys(handlers).forEach(eventKey => {\n      const callback = handlers[eventKey];\n      if (typeof callback === 'function') {\n        eventHandlers[eventKey] = event => {\n          callback({ rowData, rowIndex, rowKey, event });\n        };\n      }\n    });\n\n    if (onRowHover) {\n      const mouseEnterHandler = eventHandlers['onMouseEnter'];\n      eventHandlers['onMouseEnter'] = event => {\n        onRowHover({\n          hovered: true,\n          rowData,\n          rowIndex,\n          rowKey,\n          event,\n        });\n        mouseEnterHandler && mouseEnterHandler(event);\n      };\n\n      const mouseLeaveHandler = eventHandlers['onMouseLeave'];\n      eventHandlers['onMouseLeave'] = event => {\n        onRowHover({\n          hovered: false,\n          rowData,\n          rowIndex,\n          rowKey,\n          event,\n        });\n        mouseLeaveHandler && mouseLeaveHandler(event);\n      };\n    }\n\n    return eventHandlers;\n  }\n}\n\nTableRow.defaultProps = {\n  tagName: 'div',\n};\n\nTableRow.propTypes = {\n  isScrolling: PropTypes.bool,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  columns: PropTypes.arrayOf(PropTypes.object).isRequired,\n  rowData: PropTypes.object.isRequired,\n  rowIndex: PropTypes.number.isRequired,\n  rowKey: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  expandColumnKey: PropTypes.string,\n  depth: PropTypes.number,\n  rowEventHandlers: PropTypes.object,\n  rowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n  cellRenderer: PropTypes.func,\n  expandIconRenderer: PropTypes.func,\n  estimatedRowHeight: PropTypes.number,\n  getIsResetting: PropTypes.func,\n  onRowHover: PropTypes.func,\n  onRowExpand: PropTypes.func,\n  onRowHeightChange: PropTypes.func,\n  tagName: PropTypes.elementType,\n};\n\nexport default TableRow;\n"],"file":"TableRow.js"}