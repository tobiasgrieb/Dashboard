{"version":3,"sources":["../src/ColumnResizer.js"],"names":["INVALID_VALUE","addUserSelectStyles","doc","styleEl","getElementById","createElement","type","id","innerHTML","getElementsByTagName","appendChild","body","removeUserSelectStyles","selection","empty","defaultView","window","getSelection","removeAllRanges","e","eventsFor","touch","start","move","stop","mouse","dragEventFor","ColumnResizer","props","isDragging","lastX","width","_setHandleRef","bind","_handleClick","_handleMouseDown","_handleMouseUp","_handleTouchStart","_handleTouchEnd","_handleDragStart","_handleDragStop","_handleDrag","handleRef","ownerDocument","removeEventListener","style","column","onResizeStart","onResize","onResizeStop","minWidth","rest","userSelect","touchAction","position","top","bottom","right","cursor","ref","stopPropagation","button","addEventListener","clientX","preventDefault","targetTouches","offsetParent","offsetParentRect","getBoundingClientRect","x","scrollLeft","left","MIN_WIDTH","maxWidth","movedX","newWidth","React","PureComponent","defaultProps","noop","propTypes","PropTypes","object","func","number"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { noop, addClassName, removeClassName } from './utils';\n\nconst INVALID_VALUE = null;\n\n// copied from https://github.com/mzabriskie/react-draggable/blob/master/lib/utils/domFns.js\nexport function addUserSelectStyles(doc) {\n  if (!doc) return;\n  let styleEl = doc.getElementById('react-draggable-style-el');\n  if (!styleEl) {\n    styleEl = doc.createElement('style');\n    styleEl.type = 'text/css';\n    styleEl.id = 'react-draggable-style-el';\n    styleEl.innerHTML = '.react-draggable-transparent-selection *::-moz-selection {all: inherit;}\\n';\n    styleEl.innerHTML += '.react-draggable-transparent-selection *::selection {all: inherit;}\\n';\n    doc.getElementsByTagName('head')[0].appendChild(styleEl);\n  }\n  if (doc.body) addClassName(doc.body, 'react-draggable-transparent-selection');\n}\n\nexport function removeUserSelectStyles(doc) {\n  if (!doc) return;\n  try {\n    if (doc.body) removeClassName(doc.body, 'react-draggable-transparent-selection');\n    if (doc.selection) {\n      doc.selection.empty();\n    } else {\n      // Remove selection caused by scroll, unless it's a focused input\n      // (we use doc.defaultView in case we're in an iframe)\n      const selection = (doc.defaultView || window).getSelection();\n      if (selection && selection.type !== 'Caret') {\n        selection.removeAllRanges();\n      }\n    }\n  } catch (e) {\n    // probably IE\n  }\n}\n\nconst eventsFor = {\n  touch: {\n    start: 'touchstart',\n    move: 'touchmove',\n    stop: 'touchend',\n  },\n  mouse: {\n    start: 'mousedown',\n    move: 'mousemove',\n    stop: 'mouseup',\n  },\n};\n\nlet dragEventFor = eventsFor.mouse;\n\n/**\n * ColumnResizer for BaseTable\n */\nclass ColumnResizer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.isDragging = false;\n    this.lastX = INVALID_VALUE;\n    this.width = 0;\n\n    this._setHandleRef = this._setHandleRef.bind(this);\n    this._handleClick = this._handleClick.bind(this);\n    this._handleMouseDown = this._handleMouseDown.bind(this);\n    this._handleMouseUp = this._handleMouseUp.bind(this);\n    this._handleTouchStart = this._handleTouchStart.bind(this);\n    this._handleTouchEnd = this._handleTouchEnd.bind(this);\n    this._handleDragStart = this._handleDragStart.bind(this);\n    this._handleDragStop = this._handleDragStop.bind(this);\n    this._handleDrag = this._handleDrag.bind(this);\n  }\n\n  componentWillUnmount() {\n    if (this.handleRef) {\n      const { ownerDocument } = this.handleRef;\n      ownerDocument.removeEventListener(eventsFor.mouse.move, this._handleDrag);\n      ownerDocument.removeEventListener(eventsFor.mouse.stop, this._handleDragStop);\n      ownerDocument.removeEventListener(eventsFor.touch.move, this._handleDrag);\n      ownerDocument.removeEventListener(eventsFor.touch.stop, this._handleDragStop);\n      removeUserSelectStyles(ownerDocument);\n    }\n  }\n\n  render() {\n    const { style, column, onResizeStart, onResize, onResizeStop, minWidth, ...rest } = this.props;\n\n    return (\n      <div\n        {...rest}\n        ref={this._setHandleRef}\n        onClick={this._handleClick}\n        onMouseDown={this._handleMouseDown}\n        onMouseUp={this._handleMouseUp}\n        onTouchStart={this._handleTouchStart}\n        onTouchEnd={this._handleTouchEnd}\n        style={{\n          userSelect: 'none',\n          touchAction: 'none',\n          position: 'absolute',\n          top: 0,\n          bottom: 0,\n          right: 0,\n          cursor: 'col-resize',\n          ...style,\n        }}\n      />\n    );\n  }\n\n  _setHandleRef(ref) {\n    this.handleRef = ref;\n  }\n\n  _handleClick(e) {\n    e.stopPropagation();\n  }\n\n  _handleMouseDown(e) {\n    dragEventFor = eventsFor.mouse;\n    this._handleDragStart(e);\n  }\n\n  _handleMouseUp(e) {\n    dragEventFor = eventsFor.mouse;\n    this._handleDragStop(e);\n  }\n\n  _handleTouchStart(e) {\n    dragEventFor = eventsFor.touch;\n    this._handleDragStart(e);\n  }\n\n  _handleTouchEnd(e) {\n    dragEventFor = eventsFor.touch;\n    this._handleDragStop(e);\n  }\n\n  _handleDragStart(e) {\n    if (typeof e.button === 'number' && e.button !== 0) return;\n\n    this.isDragging = true;\n    this.lastX = INVALID_VALUE;\n    this.width = this.props.column.width;\n    this.props.onResizeStart(this.props.column);\n\n    const { ownerDocument } = this.handleRef;\n    addUserSelectStyles(ownerDocument);\n    ownerDocument.addEventListener(dragEventFor.move, this._handleDrag);\n    ownerDocument.addEventListener(dragEventFor.stop, this._handleDragStop);\n  }\n\n  _handleDragStop(e) {\n    if (!this.isDragging) return;\n    this.isDragging = false;\n\n    this.props.onResizeStop(this.props.column);\n\n    const { ownerDocument } = this.handleRef;\n    removeUserSelectStyles(ownerDocument);\n    ownerDocument.removeEventListener(dragEventFor.move, this._handleDrag);\n    ownerDocument.removeEventListener(dragEventFor.stop, this._handleDragStop);\n  }\n\n  _handleDrag(e) {\n    let clientX = e.clientX;\n    if (e.type === eventsFor.touch.move) {\n      e.preventDefault();\n      if (e.targetTouches && e.targetTouches[0]) clientX = e.targetTouches[0].clientX;\n    }\n\n    const { offsetParent } = this.handleRef;\n    const offsetParentRect = offsetParent.getBoundingClientRect();\n    const x = clientX + offsetParent.scrollLeft - offsetParentRect.left;\n\n    if (this.lastX === INVALID_VALUE) {\n      this.lastX = x;\n      return;\n    }\n\n    const { column, minWidth: MIN_WIDTH } = this.props;\n    const { width, maxWidth, minWidth = MIN_WIDTH } = column;\n    const movedX = x - this.lastX;\n    if (!movedX) return;\n\n    this.width = this.width + movedX;\n    this.lastX = x;\n\n    let newWidth = this.width;\n    if (maxWidth && newWidth > maxWidth) {\n      newWidth = maxWidth;\n    } else if (newWidth < minWidth) {\n      newWidth = minWidth;\n    }\n\n    if (newWidth === width) return;\n    this.props.onResize(column, newWidth);\n  }\n}\n\nColumnResizer.defaultProps = {\n  onResizeStart: noop,\n  onResize: noop,\n  onResizeStop: noop,\n  minWidth: 30,\n};\n\nColumnResizer.propTypes = {\n  /**\n   * Custom style for the drag handler\n   */\n  style: PropTypes.object,\n  /**\n   * The column object to be dragged\n   */\n  column: PropTypes.object,\n  /**\n   * A callback function when resizing started\n   * The callback is of the shape of `(column) => *`\n   */\n  onResizeStart: PropTypes.func,\n  /**\n   * A callback function when resizing the column\n   * The callback is of the shape of `(column, width) => *`\n   */\n  onResize: PropTypes.func,\n  /**\n   * A callback function when resizing stopped\n   * The callback is of the shape of `(column) => *`\n   */\n  onResizeStop: PropTypes.func,\n  /**\n   * Minimum width of the column could be resized to if the column's `minWidth` is not set\n   */\n  minWidth: PropTypes.number,\n};\n\nexport default ColumnResizer;\n"],"file":"ColumnResizer.js"}